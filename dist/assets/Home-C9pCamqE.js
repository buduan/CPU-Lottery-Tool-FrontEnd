import{o as l,c as a,a as s,w as p,v as h,F as x,r as b,t as i,b as d,d as g,e as f,f as w,g as v}from"./index-BkOliA2d.js";import{_ as u}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:""},y={class:"grid grid-cols-5 gap-4 my-8"},N=["onClick"],V={data(){return{inputValue:""}},methods:{addNumber(t){this.inputValue+=t,this.inputValue.length>=8&&(console.log("Student id number is",this.inputValue),this.$emit("showModel",this.inputValue),this.inputValue="")},clearInput(){this.inputValue=""},inputStatus(){console.log(this.inputValue)}}},k=Object.assign(V,{__name:"NumberImput",emits:["enlarge-text"],setup(t){return(e,o)=>(l(),a("div",null,[s("div",_,[p(s("input",{class:"w-80 p-8 h-20 text-3xl my-2 montserrat font-bold text-neutral-900 rounded-xl border-2 empty:border-slate-400 focus:border-gray-900","onUpdate:modelValue":o[0]||(o[0]=n=>e.inputValue=n),type:"text",placeholder:"输入抽奖码^_^"},null,512),[[h,e.inputValue]]),s("button",{class:"transition ease-in-out size-20 p-6 text-3xl ml-4 montserrat font-medium text-slate-50 bg-red-500 rounded-xl hover:bg-red-950",onClick:o[1]||(o[1]=(...n)=>e.clearInput&&e.clearInput(...n))}," C ")]),s("div",y,[(l(),a(x,null,b(9,n=>s("button",{class:"transition ease-in-out text-2xl size-20 p-12 montserrat font-medium bg-slate-200 rounded-xl hover:bg-slate-900 hover:text-slate-50 hover:text-3xl",key:n,onClick:r=>e.addNumber(n)},i(n),9,N)),64)),s("button",{class:"transition ease-in-out p-12 size-20 text-2xl montserrat font-medium bg-slate-200 rounded-xl hover:bg-slate-900 hover:text-slate-50 hover:text-3xl",key:"0",onClick:o[2]||(o[2]=n=>e.addNumber(0))}," 0 ")])]))}}),I=u(k,[["__scopeId","data-v-055f6238"]]),S={name:"App",components:{NumberInput:I},watch:{},data(){return{popup:!1,drewTitle:"请等待开奖...",drewName:"开奖中"}},created(){},methods:{async handleShowModel(t){this.popup=!0,await this.drewGift(t)},async drewGift(t){try{const e=await fetch(`http://cpu.gift.ibuduan.com/gift/drew/${t}`);if(!e.ok)throw new Error("Network response was not ok");const o=await e.json();this.handleApiResponse(o)}catch(e){console.error("There has been a problem with your fetch operation:",e)}},handleApiResponse(t){t.message==="抽奖成功"?(this.popup=!0,console.log("抽奖成功！"),console.log("申请者姓名:",t.applicant),console.log("学号:",t.studentId),console.log("抽中的礼品标题:",t.gift),this.drewTitle="恭喜你，"+t.applicant+"! 获得："+t.gift,console.log("礼品名称:",t.name),this.drewName=t.name):console.error("抽奖失败:",t.message)}}},C={id:"app"},$={class:"absolute left-0 top-0 w-screen h-screen bg-slate-500/20 backdrop-blur-md content-center"},T={class:"max-w-[48rem] max-h-96 bg-white rounded-3xl p-16 px-auto text-center mx-auto"},M={class:"text-4xl font-bold noto-sans-sc text-red-500"},z={class:"text-2xl font-medium noto-sans-sc my-4"};function A(t,e,o,n,r,c){const m=v("NumberInput");return l(),a("div",C,[s("div",null,[e[1]||(e[1]=s("div",{class:"my-8"},[s("h1",{class:"text-4xl my-2 font-bold text-slate-900"},[d(" 填写申请表单后，"),s("br"),d("即可在此参与抽奖！ ")]),s("span",{class:"text-gray-600 my-2"},"请在屏幕上输入抽奖码参与抽奖")],-1)),g(m,{onShowModel:c.drewGift},null,8,["onShowModel"])]),p(s("div",$,[s("div",T,[s("h1",M,i(r.drewTitle),1),s("h2",z,i(r.drewName),1),e[2]||(e[2]=w('<hr class="my-8"><span class="my-4"> 请及时联系摊位工作人员领奖，<span class="underline decoration-red-500">请勿重复领奖</span>，感谢您的合作。 <br> 抽奖结果即时有效，无特殊情况<span class="underline decoration-red-500">请立刻兑奖</span>，离开摊位后<span class="underline decoration-red-500">立即失效</span>！ </span>',2)),s("button",{onClick:e[0]||(e[0]=B=>r.popup=!r.popup),class:"block w-10 p-2 bg-red-100 rounded-lg my-4 mx-auto text-red-500"}," ✕ ")])],512),[[f,r.popup]])])}const D=u(S,[["render",A]]);export{D as default};
